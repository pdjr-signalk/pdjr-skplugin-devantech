{
  "type": "object",
  "properties": {
    "controlchannel": {
      "title": "Plugin control channel",
      "type": "string",
      "default": "notification:notifications.switchlogic.commands"
    },
    "switchpath": {
      "title": "Switchbank path",
      "type": "string",
      "default": "electrical.switches.bank.{m}.{c}"
    ),
    "modules" : {
      "title": "Modules",
      "type": "array",
      "default": [],
      "items": {
        "type": "object",
        "required": [ "id", "deviceid", "cstring", "channels" ],
        "properties": {
          "id": { "title": "Signal K module id", "type": "string" },
          "description": { "title": "Module description", "type": "string" },
          "deviceid": { "title": "Device id", "type": "string" },
          "devicecstring": { "title": "Connection string", "type": "string" },
          "channels": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "index": {
                  "title": "Channel index",
                  "type": "number"
                },
                "address": {
                  "title": "Address of associated relay on physical device",
                  "type": "number"
                },
                "description": {
                  "title": "Channel description",
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "devices": {
      "title": "Device definitions",
      "type": "array",
      "items": {
        "type": "object",
        "required" : [ "id", "size", "protocols" ],
        "properties": {
          "id": { "title": "Device identifier", "type": "string" },
          "size": { "title": "Number of relay channels", "type": "number" },
          "protocols": {
            "title": "Protocols supported by this module",
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": { "title": "Protocol id", "type": "string", "enum": [ "http", "https", "tcp", "usb" ] },
                "statuscommand": { "title": "Status command", "type": "string" },
                "authenticationtoken": { "title": "Authentication token", "type": "string" },
                "channels" : {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "address": { "title": "Relay channel address/index", "type": "number" },
                      "oncommand": { "title": "ON command", "type": "string" },
                      "offcommand": { "title": "OFF command", "type": "string" },
                      "statusmask": { "title": "Mask to reveal channel state", "type": "number" }
                    }
                  }
                }
              }
            }
          } 
        }
      },
      "default": [
        {
          "id": "USB-RLY02-SN USB-RLY02 USB-RLY82",
          "size": 2,
          "protocols": [
            {
              "id": "usb",
              "status": "[",
              "commands": [
                { "channel": 1, "on": "e", "off": "o" },
                { "channel": 2, "on": "f", "off": "p" }
              ]
            }
          ]
        },
        {
          "id": "USB-RLY08B USB-RLY16 USB-RLY16L USB-OPTO-RLY88 USB-OPTO-RLY816",
          "size": 8,
          "protocols": [
            {
              "id": "usb",
              "status": "[",
              "commands": [
                { "channel": 1, "on": "e", "off": "o" },
                { "channel": 2, "on": "f", "off": "p" },
                { "channel": 3, "on": "g", "off": "q" },
                { "channel": 4, "on": "h", "off": "r" },
                { "channel": 5, "on": "i", "off": "s" },
                { "channel": 6, "on": "j", "off": "t" },
                { "channel": 7, "on": "k", "off": "u" },
                { "channel": 8, "on": "l", "off": "v" }
              ]
            }
          ]
        },
        {
          "id": "ETH002",
          "size": 2,
          "protocols": [
            {
              "id": "tcp",
              "status": "",
              "authenticationtoken": "y{p}",
              "commands": [
                { "channel": 0, "on": "{A} {C}\u0001\u0000\u007B", "off": "{A} {C}\u0000\u0000\u007B" }
              ]
            }
          ]
        },
        {
          "id": "ETH044",
          "size": 4,
          "protocols": [
            {
              "id": "tcp",
              "status": "",
              "authenticationtoken": "y{p}",
              "commands": [
                { "channel": 0, "on": "{A} {C}\u0001\u0000\u007B", "off": "{A} {C}\u0000\u0000\u007B" }
              ]
            }
          ]
        },
        {
          "id": "ETH008",
          "size": 8,
          "protocols": [
            {
              "id": "tcp",
              "status": "",
              "authenticationtoken": "y{p}",
              "commands": [
                { "channel": 0, "on": "{A} {C}\u0001\u0000\u007B", "off": "{A} {C}\u0000\u0000\u007B" }
              ]
            }
          ]
        },
        {
          "id": "ETH8020",
          "size": 20,
          "protocols": [
            {
              "id": "tcp",
              "status": "",
              "authenticationtoken": "y{p}",
              "commands": [
                { "channel": 0, "on": "{A} {C}\u0001\u0000\u007B", "off": "{A} {C}\u0000\u0000\u007B" }
              ]
            }
          ]
        }
      ]
    }
  }
}
