{
    "type": "object",
    "properties": {
        "notificationtriggerpath": { "title": "Default notification path for relay triggers", "type": "string", "default": "notifications.control." },
        "modules" : {
            "type": "array",
            "default": [],
            "items": {
                "type": "object",
                "required": [ "id", "deviceid", "cstring", "channels" ],
                "properties": {
                    "id": { "title": "Signalk module id", "type": "string" },
                    "deviceid": { "title": "Device id", "type": "string" },
                    "cstring": { "title": "Connection string", "type": "string" },
                    "description": { "title": "Description", "type": "string" },
                    "channels": {
                        "type": "array",
                        "default": [],
                        "items": {
                            "type": "object",
                            "required": [ "index" ],
                            "properties": {
                                "index": { "title": "Device relay index", "type": "number" },
                                "id": { "title": "Signal K channel id", "type": "string" },
                                "name": { "title": "Channel name", "type": "string" },
                                "trigger": { "title": "Trigger path", "type": "string" }
                            }
                        }
                    }
                }
            }
        },
        "devices": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "id": { "title": "Device identifier", "type": "string" },
                    "size": { "title": "Number of relay channels", "type": "number" },
                    "protocols": {
                        "title": "Protocols supported by this module",
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "id": { "title": "Protocol id", "type": "string", "enum": [ "http", "https", "tcp", "usb" ] },
                                "status": { "title": "Status command", "type": "string" },
                                "commands" : {
                                    "type": "array",
                                    "items": {
                                        "type": "object",
                                        "properties": {
                                            "channel": { "title": "Relay channel index", "type": "number" },
                                            "on": { "title": "ON command", "type": "string" },
                                            "off": { "title": "OFF command", "type": "string" }
                                        }
                                    }
                                }
                            }
                        }
                    } 
                }
            }
        }
    }
}
